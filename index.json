
{
    "version": "https://jsonfeed.org/version/1.1",
    "title": "yun's attic",
    "description": "Recent content on yun's attic",
    "home_page_url": "https://yunli.nl/",
    "feed_url": "https://yunli.nl/index.json",
    "language": "en-GB",
    "icon": "https://yunli.nl/images/logo.png",
    "favicon": "https://yunli.nl/images/logo.png",
    "authors": [
        {
            "name": "yun li",
            "url": "https://yunli.nl"
        }
    ],
    "items": [
        {
            "title": "Using Different SSH Profiles for Different Bitbucket Accounts",
            "date_published": "2025-07-18T11:54:19+03:00",
            "date_modified": "2025-07-18T11:54:19+03:00",
            "id": "https://yunli.nl/quick-fixes/2025-07-18-using_different_ssh_profiles_for_different_bitbucket_accounts/",
            "url": "https://yunli.nl/quick-fixes/2025-07-18-using_different_ssh_profiles_for_different_bitbucket_accounts/",
            "content_html": "\u003cp\u003eFor various reasons I have multiple Bitbucket accounts with different organisations, and Bitbucket does not let you use the same SSH key for different organisations - probably for a good reason.\nI\u0026rsquo;ve have had to set this up a couple times, and this time I finally decided to jot it down so hopefully I won\u0026rsquo;t have to rack my brain next time.\u003c/p\u003e\n\u003cp\u003eWhen handling timeseries data, quite often you may want to resample the data at a different frequency and use it that way.\u003c/p\u003e\n\u003cp\u003eOne way to achieve this is to load all data with Python, and \u003ca href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html\"\u003eresample\u003c/a\u003e or \u003ca href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.reindex.html\"\u003ereindex\u003c/a\u003e it with Pandas.\u003c/p\u003e\n\u003cp\u003eAn alternative is to query directly in SQL by using a pattern like the one below. This allows you to only get the most recent data at each sample point you\u0026rsquo;re interested in. This particular example samples the exchange rate between JPY and USD every two hours (in the actual database, I have some more recent data at 1 min intervals, and the rest at either 5 min or 30 min intervals):\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eselect\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003egenerate_series\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;2020-01-01\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;2020-01-15\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;2 hour\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#6639ba\"\u003einterval\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003elateral\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eselect\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ef\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003ewhere\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ef\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e\u0026lt;=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eand\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_from\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;JPY\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eand\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_to\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;USD\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eorder\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eby\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ef\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003edesc\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003elimit\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ep\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eon\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eSince I\u0026rsquo;m down on the SQLAlchemy ORM road, why not try to write the query there as well!\u003c/p\u003e\n\u003cp\u003eI found the SQLAlchemy documentation quite difficult to grapple with at times, and I get the impression that there are many, many different ways to accomplish the same thing.\nAt some point I got quite overwhelmed and frustrated after reading page after page of docs that doesn\u0026rsquo;t directly answer the question I have.\u003c/p\u003e\n\u003cp\u003eThen I came across this \u003ca href=\"https://adam-gligor.github.io/2019/11/15/sqlalchemy-subqueries/\"\u003eblog post\u003c/a\u003e by Adam Gligor, which really helped me comb my thoughts and finally decide on how I want to approach it.\u003c/p\u003e\n\u003cp\u003eFirst take care of all the imports:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003edatetime\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eas\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003edt\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e and_\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e desc\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.orm\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e aliased\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e sessionmaker\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.sql\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e func\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.sql.expression\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e join\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003e.constants\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e DB_ENGINE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003e.models\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e FxPrice\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e_Session \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e sessionmaker\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003ebind\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003eDB_ENGINE\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esession \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e _Session\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eI wrote this subquery to generate timeseries that I want to resample the data on, and aliased it:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003estart_ts\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e end_ts \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e dt\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e dt\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003einterval \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e dt\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003etimedelta\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003ehours\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esubquery_ts \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    session\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003equery\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        func\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003egenerate_series\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003estart_ts\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e end_ts\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e interval\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elabel\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;sampled_at\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003esubquery\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elateral\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ea \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e aliased\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003esubquery_ts\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThe \u003ccode\u003ealiased()\u003c/code\u003e function does something like this in SQL:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eselect\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esome_table\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eas\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esome_alias\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e...\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eIt essentially allows you to give a name to some (intermediate or temporary) table, so that you can reference it later, either when joining it with another table, or joining it with itself.\u003c/p\u003e\n\u003cp\u003eThen I wrote another subquery to get the most recent price update at each time point I want to sample.\nNote that here I compared the timestamp in \u003ccode\u003eFxPrice\u003c/code\u003e table with \u003ccode\u003ea.c.sampled_at\u003c/code\u003e, where \u003ccode\u003ea\u003c/code\u003e is the aforementioned alias to the table created using \u003ccode\u003egenerate_series\u003c/code\u003e.\n(The \u003ccode\u003e.c\u003c/code\u003e in \u003ccode\u003ea.c\u003c/code\u003e is for \u003ccode\u003ecolumns\u003c/code\u003e, so \u003ccode\u003ea.c.sampled_at\u003c/code\u003e gets you the column named \u003ccode\u003esampled_at\u003c/code\u003e.)\u003c/p\u003e\n\u003cp\u003eWithout the aliasing I wouldn\u0026rsquo;t be able to achieve this effect; instead it would create a nested subquery and that\u0026rsquo;s not what I want.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esubquery_price \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    session\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003equery\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eFxPrice\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003efilter\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        and_\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            FxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ets \u003cspan style=\"color:#0550ae\"\u003e\u0026lt;=\u003c/span\u003e a\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003esampled_at\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            FxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_from \u003cspan style=\"color:#0550ae\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;JPY\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            FxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_to \u003cspan style=\"color:#0550ae\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;USD\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eorder_by\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003edesc\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eFxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elimit\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003esubquery\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elateral\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eFinally, putting everything together:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eresults \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    session\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003equery\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        a\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eprice\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eselect_from\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003ea\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ejoin\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003esubquery_price\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e true\u003cspan style=\"color:#1f2328\"\u003e())\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eall\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eWhich actually produces the following query:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_2\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003esampled_at\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003eprice\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003egenerate_series\u003cspan style=\"color:#1f2328\"\u003e(:\u003c/span\u003egenerate_series_1\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003egenerate_series_2\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003egenerate_series_3\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_2\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eJOIN\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eLATERAL\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecreated_at\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecreated_at\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_from\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_to\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003eprice\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eprice\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e\u0026lt;=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_2\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAND\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003ecurrency_from_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAND\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003ecurrency_to_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eORDER\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eBY\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eDESC\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eLIMIT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003eparam_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eON\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ewhere the parameters are:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#1f2328\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;generate_series_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e datetime\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;generate_series_2\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e datetime\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;generate_series_3\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e datetime\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003etimedelta\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eseconds\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e7200\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;currency_from_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;JPY\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;currency_to_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;USD\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;param_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#1f2328\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"
        },
        {
            "title": "The Day Lasts More than a Hundred Years",
            "date_published": "2021-10-14T15:36:27+02:00",
            "date_modified": "2021-10-14T15:36:27+02:00",
            "id": "https://yunli.nl/reading-notes/2021-10-14-the_day_lasts_more_than_a_hundred_years/",
            "url": "https://yunli.nl/reading-notes/2021-10-14-the_day_lasts_more_than_a_hundred_years/",
            "content_html": "\u003ch3 id=\"the-day-lasts-more-than-a-hundred-years\"\u003e\u003ca href=\"https://www.goodreads.com/book/show/366889.The_Day_Lasts_More_Than_a_Hundred_Years\"\u003e\u003cem\u003eThe Day Lasts More than a Hundred Years\u003c/em\u003e by Chingiz Aitmatov, translated by John French\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eI thought this would be a science-fiction story, because I vaguely remember phrases like \u0026ldquo;aliens\u0026rdquo; and \u0026ldquo;building rockets around the world\u0026rdquo; when I first saw it in a random booklist.\nBut it\u0026rsquo;s actually first of all a story about a man\u0026rsquo;s life in the Soviet Union, and the life and deaths of his friends.\nIt happens in the Soviet Union, but this story is not set at the center of it. Not the glorious Motherland Russia that started the revolution, but in Kazakhstan, where religion, traditions, and old legends are perhaps a bit more at odds with the Soviet ideals.\u003c/p\u003e\n\u003cp\u003eIt\u0026rsquo;s a somber story, although at times it feels like an elaborate Soviet joke, with both the story teller and the listener aware of the hopelessness of it all, but still making the most out of the situation. Life goes on and there must be hope for the future somewhere.\u003c/p\u003e\n\u003cp\u003eThis is, in my opinion, a much better book than\n\u003ca href=\"https://www.goodreads.com/book/show/860566.How_the_Steel_Was_Tempered\"\u003e\u003cem\u003eHow the Steel was Tempered\u003c/em\u003e\u003c/a\u003e,\nwhich was a mandatory read for school kids in China (at least back in the days).\nI wish I had the pleasure of reading Aitmatov\u0026rsquo;s story instead.\u003c/p\u003e\n\u003cp\u003eThis bit interesting commentary came from the book\u0026rsquo;s preface, written by the author himself (this book was published in 1988):\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA man without a sense of history, without memory of the past, who is forced to reconsider his place in the world, a man deprived of the historic experience of his own and other peoples, lacks any perspective and can only live for the present, for the day. To prove this, one has only to recall the ‘Cultural Revolution’ in China, which manipulated the consciousness of the people and reduced the many complications of life to the level of quotations from the so-called little Red books of Mao. Here, the ancient traditions of the people clashed with the hegemonic policies of the then Chinese government. Paradoxically this denial or falsification of the past went hand in hand with a self-satisfied, boastful chauvinism. The result was isolation; for only behind a real or metaphorical Wall of China can one preserve the myth of the superiority of one people over all others.\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003eThis is such a sick burn given today\u0026rsquo;s politics. Some thirty years later both the real and metaphorical Wall of China is getting higher and thicker than ever.\nI guess thirty years is still too little time to really learn anything, especially if you\u0026rsquo;re not trying very hard.\u003c/p\u003e\n"
        },
        {
            "title": "Works by Liu Cixin",
            "date_published": "2021-04-10T16:45:20+02:00",
            "date_modified": "2021-04-10T16:45:20+02:00",
            "id": "https://yunli.nl/reading-notes/2021-04-10-liu_cixin/",
            "url": "https://yunli.nl/reading-notes/2021-04-10-liu_cixin/",
            "content_html": "\u003cp\u003eI\u0026rsquo;ve never been the biggest fan of \u003ca href=\"https://en.wikipedia.org/wiki/Liu_Cixin\"\u003eLiu Cixin\u003c/a\u003e,\neven though he\u0026rsquo;s often heralded as \u0026ldquo;the best sci-fi author in China\u0026rdquo;.\nHe does (sometimes) demonstrate interesting ideas by combining scientific concepts and imagination,\nbut in my opinion that\u0026rsquo;s not quite enough to be a good sci-fi story.\nIn particular,\nthese two elements in his writings always leave me feeling irritated,\nif not downright angry:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eHelpless female characters with a \u0026ldquo;pure\u0026rdquo; mind (and body)\u003c/p\u003e\n\u003cp\u003eI can accept it if the men are always the hero \u0026mdash;\nthat\u0026rsquo;s not uncommon in most fiction, especially from his time.\nBut I cannot accept how women are depicted in his stories:\nsilly, helpless, and they just don\u0026rsquo;t really do anything apart from waiting and hoping and praying.\nAll his female characters seem to come straight from the damsel in distress trope,\nwith little thoughts or desires of their own.\u003c/p\u003e\n\u003cp\u003eInterestingly, in \u003ca href=\"https://www.goodreads.com/book/show/49247266-to-hold-up-the-sky\"\u003ethis translated version\u003c/a\u003e,\nthe hero in a few of the stories have the opposite gender as compared to the original Chinese stories:\ne.g. \u003cem\u003eThe Time Migration\u003c/em\u003e.\nI guess the translator is tired of this gender stereotype as well!\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCorruption? What corruption!\u003c/p\u003e\n\u003cp\u003eLiu often set his stories against a backdrop that\u0026rsquo;s somewhat reminiscient of the typical communist China:\nthe people are suffering,\nthe system is not working,\nand yet there\u0026rsquo;s still rampant corruption.\u003c/p\u003e\n\u003cp\u003eThe heros of this stories recognize this corruption and wants to make a difference,\nbut in the end they still go along with the corrupted ways because that\u0026rsquo;s the only way to move forward for the \u0026ldquo;greater good\u0026rdquo;.\nThere is some serious mental gymnastics happening:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThis is not working, and I want to fix it!\u003c/li\u003e\n\u003cli\u003eBut that would mean bringing changes to a lot of people!\u003c/li\u003e\n\u003cli\u003eThere\u0026rsquo;s no way other people can accept changes!\u003c/li\u003e\n\u003cli\u003eSo I better stick to how things work now!\u003c/li\u003e\n\u003cli\u003eNow I\u0026rsquo;ll also be praised by my boss/elder, because accepting the reality shows that I\u0026rsquo;m being mature!\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI\u0026rsquo;ve witnessed this in my life under many different circumstances,\nand I\u0026rsquo;m still incapable of this mental gymnastics.\nGuess who\u0026rsquo;s not mature :-/.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eMaybe it was his intention to irritate his readers to make them reflect and confront the reality,\nbut I highly doubt that.\nFor me it\u0026rsquo;s more likely that this is just him being true to his heart.\u003c/p\u003e\n"
        },
        {
            "title": "Totoros",
            "date_published": "2021-03-29T18:01:56+02:00",
            "date_modified": "2021-03-29T18:01:56+02:00",
            "id": "https://yunli.nl/sketchbook/2021-03-29_totoros/",
            "url": "https://yunli.nl/sketchbook/2021-03-29_totoros/",
            "content_html": "\u003cp\u003e\u003cimg src=\"/sketchbook/2021-03-29_totoros.jpg\" alt=\"Totoros\" title=\"Totoros\"\u003e\u003c/p\u003e\n\u003cp\u003eTotoros, gouache\u003c/p\u003e"
        },
        {
            "title": "Slaughterhouse-Five",
            "date_published": "2021-03-12T16:36:27+01:00",
            "date_modified": "2021-03-12T16:36:27+01:00",
            "id": "https://yunli.nl/reading-notes/2021-03-12-slaughterhouse-five/",
            "url": "https://yunli.nl/reading-notes/2021-03-12-slaughterhouse-five/",
            "content_html": "\u003ch3 id=\"slaughterhouse-five\"\u003e\u003ca href=\"https://www.goodreads.com/book/show/4981.Slaughterhouse_Five\"\u003e\u003cem\u003eSlaughterhouse-Five\u003c/em\u003e by Kurt Vonnegut Jr.\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eI picked up a random book by Kurt Vonnegut Jr.,\nexpecting a science-fiction type of story,\nbut instead got a book about war.\u003c/p\u003e\n\u003cp\u003eI never liked books or movies about war,\nthey glorify it by telling stories of heroes and their gallantry,\nwhereas the dead sidekicks and other collateral damages barely constitute an afterthought.\u003c/p\u003e\n\u003cp\u003eI\u0026rsquo;d hate to be such a sidekick,\nand hate it even more if I were such a hero.\u003c/p\u003e\n\u003cp\u003eWar is so ridiculously pointless and painful,\nand it always happens because somehow people are lead to think that wars can solve problems.\nI\u0026rsquo;m not a student of history or of the human psyche,\nbut it seems to me that at every chance where an in-group/out-group distinction can be made,\nsomeone will inevitably feel the need to assert the superiority of their own group identity,\nby launching wars of some form.\nWhat\u0026rsquo;s especially sad is most often people never actually try to get to know know the other side, the human beings they are trying to persecute.\u003c/p\u003e\n\u003c!--I just hope I can see world peace in my life, oh well.--\u003e\n\u003cp\u003eI also just realised that I\u0026rsquo;ve read a lot more stories about WW2 from the perspective of Europeans and Americans than stories from Asia-Pacific,\neven though the war there lasted longer and is no less gruesome.\u003c/p\u003e\n\u003cp\u003eI can\u0026rsquo;t recall any Chinese book that tries to combine personal experience of the war with some elements of fiction\n(I\u0026rsquo;m sure they exist, but just somehow never crossed my path),\nor any other book that tries to uncover the futility of war.\nMaybe at that point in China wars of different shapes and forms had been going on for too long and desensitised the people living through them.\nAlso I think part of the reason is there was never any serious,\ndeep-level reconciliation between China and Japan,\nand on the other hand the current government in China is more than happy to exploit this piece of history for their \u0026ldquo;patriotic education\u0026rdquo;.\u003c/p\u003e\n\u003cp\u003eI\u0026rsquo;ve also never explored Korean or south-east Asian literatures so I know very little about what happened there.\nAnd I also don\u0026rsquo;t know how Japan as a country feels about that period,\nbut maybe these books can shed some light - I\u0026rsquo;ll read them later:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.goodreads.com/book/show/50021008-memoirs-of-a-kamikaze\"\u003eMemoirs of a Kamikaze: A World War II Pilot\u0026rsquo;s Inspiring Story of Survival, Honor and Reconciliation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.goodreads.com/book/show/37569315-thirty-minutes-over-oregon\"\u003eThirty Minutes Over Oregon: A Japanese Pilot\u0026rsquo;s World War II Story\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n"
        },
        {
            "title": "Ham on Rye",
            "date_published": "2021-02-07T18:36:27+01:00",
            "date_modified": "2021-02-07T18:36:27+01:00",
            "id": "https://yunli.nl/reading-notes/2021-02-07-ham_on_rye/",
            "url": "https://yunli.nl/reading-notes/2021-02-07-ham_on_rye/",
            "content_html": "\u003ch3 id=\"ham-on-rye\"\u003e\u003ca href=\"https://www.goodreads.com/book/show/38501.Ham_on_Rye\"\u003e\u003cem\u003eHam on Rye\u003c/em\u003e by Charles Bukowski\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eI\u0026rsquo;ve been curious about the writings of Charles Bukowski for a while,\nmostly because of his dirty, subversive style.\u003c/p\u003e\n\u003cp\u003eThis story delivers just that:\na straight punch to the gut\n(there are many punches thrown in the book, both figurative and literal),\npacked with the hopelessness and disillusionment of being an outsider,\nand the rage of man against machine.\u003c/p\u003e\n\u003cp\u003eAmong the many themes explored in the story,\nthe one that resonated the most with me is how an individual can be totally powerless against the institution and the society at large.\nAnd the violence always makes me shudder.\nI don\u0026rsquo;t like violence, and wish it gone.\u003c/p\u003e\n"
        },
        {
            "title": "Lessons Learned from RC2020",
            "date_published": "2021-02-02T20:56:27+01:00",
            "date_modified": "2021-02-02T20:56:27+01:00",
            "id": "https://yunli.nl/blogs/2021-02-02lessons_learned_rc2020/",
            "url": "https://yunli.nl/blogs/2021-02-02lessons_learned_rc2020/",
            "content_html": "\u003cp\u003eI took part in the recently-finished \u003ca href=\"https://paperswithcode.com/rc2020\"\u003eML Reproducibility Challenge 2020\u003c/a\u003e, and \u003ca href=\"https://github.com/MotherOfUnicorns/FACT_AI_project\"\u003etogether with a great team\u003c/a\u003e we attempted to reproduce one of the papers as part of a course assignment.\u003c/p\u003e\n\u003cp\u003eThis is just my attempt to get back to blogging, as well as writing down some lessons learned.\nIt\u0026rsquo;s by no means a criticism of anything, but lately I\u0026rsquo;ve realised if I don\u0026rsquo;t write things down I\u0026rsquo;ll most likely forget all about it in two or three months.\u003c/p\u003e\n\u003cp\u003eShort story is, we couldn\u0026rsquo;t completely reproduce the original paper results. From my limited sample size of talking to and listening to presentations of my fellow students participating in this challenge, it seems like it\u0026rsquo;s quite common to \u003cem\u003e\u003cstrong\u003enot\u003c/strong\u003e\u003c/em\u003e be able to reproduce a paper\u0026rsquo;s results completely, not in four weeks at least. That\u0026rsquo;s not as optimistic as I had thought.\u003c/p\u003e\n\u003cp\u003eIn a way my group already had a head start, because the paper we tried to reproduce already came with some pretty extensive code, nuts and bolts included.\nBut after scrolling through pages after pages, we realised this code is adapted from another paper, so there are a lot of dangling variables and unfinished experiments hidden inside, and at times this could be really confusing.\u003c/p\u003e\n\u003cp\u003eBeing the overachieving students that we are, in the very beginning of our reproducibility study we were already thinking about the million different ways we could test this model or examine the authors\u0026rsquo; claims under more general settings.\nBut training these babies is slow, so it\u0026rsquo;s quite easy to get discouraged by the progress.\nThen I felt somewhat swamped in discussions that were mostly speculation rather than factually grounded.\nThat coupled with (almost) midnight zoom meetings was definitely not helpful for my sleep quality.\u003c/p\u003e\n\u003cp\u003eOverall the experience was a very rewarding one, and I want to try to summarise what I observed/learned:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDocument your code.\u003c/li\u003e\n\u003cli\u003eRemove the bits in your code that you don\u0026rsquo;t actually use.\u003c/li\u003e\n\u003cli\u003eTest your code. Don\u0026rsquo;t write one thing and your code is actually doing another (wildly different thing).\u003c/li\u003e\n\u003cli\u003eAt my previous job they made sure we read this book: \u003ca href=\"https://www.goodreads.com/book/show/3735293-clean-code\"\u003e\u003cem\u003eClean Code\u003c/em\u003e\u003c/a\u003e, or at least get the gist of it. I think that\u0026rsquo;s a pretty good idea, even if you\u0026rsquo;re \u0026ldquo;just a data guy/gal/person\u0026rdquo;.\u003c/li\u003e\n\u003cli\u003eOptimise your code so it doesn\u0026rsquo;t take an insane amount of time (1.5 days! on a NVIDIA 1080 Ti) to train a not-grossly-complex model.\u003c/li\u003e\n\u003cli\u003eRelated to the previous point, make sure you\u0026rsquo;re not fine-tuning parameters that you don\u0026rsquo;t actually want to change, such as embeddings, unless that\u0026rsquo;s your intention.\u003c/li\u003e\n\u003cli\u003eIf the dataset only has a train/test split, and you would also want a dev split, it\u0026rsquo;s better to shave it off from the test part rather than train part, otherwise you might overfit your model because your train set and dev set is too similar/correlated.\u003c/li\u003e\n\u003cli\u003eTrain a model and evaluate multiple times with different seeds to make sure you\u0026rsquo;re not just getting lucky with your results.\u003c/li\u003e\n\u003cli\u003eReport your hyper-parameters.\u003c/li\u003e\n\u003cli\u003eReport your complete results (in an appendix or supplementary materials), don\u0026rsquo;t cherry-pick or leave the impression of cherry-picking your results just to support your claim.\u003c/li\u003e\n\u003cli\u003eIt\u0026rsquo;s probably not a good idea to use the same metric to evaluate different datasets/tasks. An accuracy improvement from 65% to 67% is not as awe-inspiring as an improvement from 95% to 97%.\u003c/li\u003e\n\u003cli\u003eDon\u0026rsquo;t speculate before you get your results from the experiments (talking to myself right now :D). It\u0026rsquo;s easier to come up with one plan after you have solid results than to have ten contingency plans before seeing any actual numbers.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI actually think the scientific community would be much happier and we\u0026rsquo;d be making much better progress as a whole if we all publish \u0026ldquo;failed\u0026rdquo; experiments rather than just those shiny ones.\nKnowing what will not work and what not to do is, in my opinion, much more helpful for gaining new insights and coming up with new ideas to experiment with.\u003c/p\u003e\n\u003cp\u003eMaybe we need to start a negative-arXiv to host the dumb, the unglorious and the unprestigious.\u003c/p\u003e\n"
        },
        {
            "title": "Recipes",
            "date_published": "2020-12-04T14:12:14+02:00",
            "date_modified": "2020-12-04T14:12:14+02:00",
            "id": "https://yunli.nl/recipes/",
            "url": "https://yunli.nl/recipes/",
            "content_html": "\u003cp\u003eYou can find some of the recipes I collected \u003ca href=\"http://yunli.nl/recipes/\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eBon appétit!\u003c/p\u003e\n"
        },
        {
            "title": "Autumn 2020 II",
            "date_published": "2020-10-25T22:01:56+02:00",
            "date_modified": "2020-10-25T22:01:56+02:00",
            "id": "https://yunli.nl/sketchbook/2020-10-25_autumn2/",
            "url": "https://yunli.nl/sketchbook/2020-10-25_autumn2/",
            "content_html": "\u003cp\u003e\u003cimg src=\"/sketchbook/2020-10-25_autumn2.png\" alt=\"Autumn 2020 II\" title=\"Autumn 2020 II\"\u003e\u003c/p\u003e\n\u003cp\u003eAutumn 2020 II, watercolour\u003c/p\u003e\n\u003cp\u003eAutumn 2020 is still an autumn.\u003c/p\u003e"
        },
        {
            "title": "Autumn 2020 I",
            "date_published": "2020-10-25T22:01:55+02:00",
            "date_modified": "2020-10-25T22:01:55+02:00",
            "id": "https://yunli.nl/sketchbook/2020-10-25_autumn1/",
            "url": "https://yunli.nl/sketchbook/2020-10-25_autumn1/",
            "content_html": "\u003cp\u003e\u003cimg src=\"/sketchbook/2020-10-25_autumn1.png\" alt=\"Autumn 2020 I\" title=\"Autumn 2020 I\"\u003e\u003c/p\u003e\n\u003cp\u003eAutumn 2020 I, watercolour\u003c/p\u003e\n\u003cp\u003eAutumn 2020 is still an autumn.\u003c/p\u003e"
        },
        {
            "title": "Rough Estimate: When to go back to school?",
            "date_published": "2020-09-26T22:20:55+02:00",
            "date_modified": "2020-09-26T22:20:55+02:00",
            "id": "https://yunli.nl/blogs/2020-09-26-rough_estimate_when_to_go_to_school/",
            "url": "https://yunli.nl/blogs/2020-09-26-rough_estimate_when_to_go_to_school/",
            "content_html": "\u003cp\u003eI was very excited to go back to school to once again bask in the glory of education and inch closer to becoming a virtuous woman.\nBut the gods have not been kind, and more importantly, the humans have not been able enough to trust and be trusted and keep the virus at bay through concerted efforts.\nSo even though I really miss the chance to meet people and talk to them once a week, I\u0026rsquo;ve decided to stay at home and avoid university campuses for a while.\nEspecially since \u003ca href=\"https://www.rivm.nl/documenten/wekelijkse-update-epidemiologische-situatie-covid-19-in-nederland\"\u003emy age group has the highest infection rate right now\u003c/a\u003e.\nYou never know.\u003c/p\u003e\n\u003cp\u003eThat said, I also want to know: in the (near?) future, when can I go back to school?\u003c/p\u003e\n\u003cp\u003eThere must be a number \u0026ndash; a magical indicator \u0026ndash; that will signal my return.\u003c/p\u003e\n\u003cp\u003eI thought I would start with the infection rate, or perhaps the rate of positively tested cases daily as an estimate of how many people around me are infected.\nBut not everyone getting tested will be roaming the street, so it\u0026rsquo;s not likely that I will encounter them.\nAlso a person who\u0026rsquo;s feeling completely fine is probably less interested in getting their brain swabbed.\u003c/p\u003e\n\u003cp\u003eThat\u0026rsquo;s too many twists and turns to reason about. I needed something rough.\nSo here\u0026rsquo;s another thought: every day there are more people tested positive. Over a short period (say 3 days) this number does not (yet) fluctuate very wildly.\nSo why not use the number of daily new cases as a substitute for people carrying the virus that are roaming the streets 3 days ago?\nAnd to take it further, why no use the number of daily new cases as a substitute for people carrying the virus that are roaming the streets now?\u003c/p\u003e\n\u003cp\u003eMany problems with this assumption exist, true. But it\u0026rsquo;s the most readily available number.\u003c/p\u003e\n\u003cp\u003eNext, the classic i.i.d. assumption: that everyone in the country are equally likely to carry the virus, and one person\u0026rsquo;s chance of being infected has no influence on others (say their family members or friends with whom they meet often).\u003c/p\u003e\n\u003cp\u003eAnother bad assumption! But why not, this is a rough estimate.\u003c/p\u003e\n\u003cp\u003eThe rest of the things fall into place very quickly.\u003c/p\u003e\n\u003cp\u003eIf \u003ccode\u003es\u003c/code\u003e is the number of daily new cases, \u003ccode\u003eP\u003c/code\u003e the total population of the country/province/whatever, \u003ccode\u003eN\u003c/code\u003e the number of people I meet/share a room with every time I venter out of my home into the university campus, then the probability of no one I meet is carrying the virus is\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e(1 - s/P)^N\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo the probability of at least one person is carrying the virus is\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e1 - (1 - s/P)^N\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf I accept at most \u003ccode\u003ea = 0.1%\u003c/code\u003e risk of meeting someone who carries the virus, then I can formulate it as\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e1 - (1 - s/P)^N \u0026lt;= a\n    (1 - s/P)^N \u0026gt;= 1 - a\n        1 - s/P \u0026gt;= (1 - a)^(1/N)\n            s/P \u0026lt;= 1 - (1 - a)^(1/N)\n              s \u0026lt;= P(1 - (1 - a)^(1/N))\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSince I\u0026rsquo;m meeting about 20 people every time, for the \u003ca href=\"https://en.wikipedia.org/wiki/Demography_of_the_Netherlands\"\u003epopulation in the Netherlands\u003c/a\u003e and my appetite for risk, that works out to \u003ccode\u003es = 850\u003c/code\u003e.\nCompared to the \u003ca href=\"https://www.rivm.nl/en/novel-coronavirus-covid-19/current-information\"\u003ealmost 3000 cases\u003c/a\u003e a day now, I can stay at home for a bit longer.\u003c/p\u003e\n\u003cp\u003eIt\u0026rsquo;s pretty conservative, but I remember getting pneumonia as a kid, not a good feeling.\u003c/p\u003e\n\u003cp\u003eI\u0026rsquo;m sure there are much better epidemiology models that can give you a smarter estimate.\nBut I am now a committed woman (to homework and group projects) so a rough estimate will have to suffice.\u003c/p\u003e\n\u003cp\u003eI do hope that day comes soon.\u003c/p\u003e\n"
        },
        {
            "title": "Dissociate II",
            "date_published": "2020-09-10T23:56:55+02:00",
            "date_modified": "2020-09-10T23:56:55+02:00",
            "id": "https://yunli.nl/sketchbook/2020-09-10_dissociate2/",
            "url": "https://yunli.nl/sketchbook/2020-09-10_dissociate2/",
            "content_html": "\u003cp\u003e\u003cimg src=\"/sketchbook/2020-09-10_dissociate2.jpg\" alt=\"Dissociate II\" title=\"Dissociate II\"\u003e\u003c/p\u003e\n\u003cp\u003eDissociate II, watercolour\u003c/p\u003e"
        },
        {
            "title": "Dissociate I",
            "date_published": "2020-08-23T19:56:55+02:00",
            "date_modified": "2020-08-23T19:56:55+02:00",
            "id": "https://yunli.nl/sketchbook/2020-08-23_dissociate1/",
            "url": "https://yunli.nl/sketchbook/2020-08-23_dissociate1/",
            "content_html": "\u003cp\u003e\u003cimg src=\"/sketchbook/2020-08-23_dissociate1.jpg\" alt=\"Dissociate I\" title=\"Dissociate I\"\u003e\u003c/p\u003e\n\u003cp\u003eDissociate I, watercolour\u003c/p\u003e"
        },
        {
            "title": "Waking Up with rtcwake and crontab",
            "date_published": "2020-08-17T21:19:46+02:00",
            "date_modified": "2020-08-17T21:19:46+02:00",
            "id": "https://yunli.nl/quick-fixes/2020-08-17_waking_up_with_rtcwake_and_crontab/",
            "url": "https://yunli.nl/quick-fixes/2020-08-17_waking_up_with_rtcwake_and_crontab/",
            "content_html": "\u003cp\u003eI have a couple of scripts that I\u0026rsquo;d like to run at night, but I also want to leave my machine suspended to RAM overnight to conserve energy (and reduce noise, the fan is a beast!). So this is just a note for myself about how I went about it this time, using \u003ccode\u003ertcwake\u003c/code\u003e and \u003ccode\u003ecrontab\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eHere\u0026rsquo;s the crontab I originally had, which is triggered once a day in the afternoon:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e59 15 * * *  /some/bash/script.sh\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBut now I want to run it at night, when I\u0026rsquo;m not around my computer, which like me is probably also asleep. So I need to make sure the machine is in an awake state just before the cron jobs are scheduled to be executed.\u003c/p\u003e\n\u003cp\u003eSome minutes of DuckDuckGo later I found \u003ca href=\"https://www.man7.org/linux/man-pages/man8/rtcwake.8.html\"\u003e\u003ccode\u003ertcwake\u003c/code\u003e\u003c/a\u003e, which uses the hardware clock on the motherboard to send a signal to wake up the machine at desired time. Sounds like exactly what I need.\u003c/p\u003e\n\u003cp\u003eSo now my crontab becomes:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e1  4 * * *  sudo rtcwake -m no -t $(date +\\%s -d \u0026#34;tomorrow 03:55\u0026#34;)\n59 3 * * * /some/bash/script.sh\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSome explanations:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ertcwake\u003c/code\u003e needs root permission, hence the \u003ccode\u003esudo\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eThe \u003ccode\u003e-m no\u003c/code\u003e flag only sets an alert to wake up the machine. If the machine is already awake, nothing will change.\u003c/li\u003e\n\u003cli\u003eThe main idea is to start a cycle: \u003ccode\u003ertcwake\u003c/code\u003e wakes up the machine (03:55) a few minutes before the scheduled cron job (03:59), and then another cron job (04:01) uses \u003ccode\u003ertcwake\u003c/code\u003e to set up the next alert for tomorrow.\u003c/li\u003e\n\u003cli\u003eAfter everything is done, the machine will go to sleep after 30 minutes according to some other energy saving settings I have.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI waited for one night, but it did not work as I expected (it\u0026rsquo;s the first-time-never-works-law).\u003c/p\u003e\n\u003cp\u003eBecause \u003ccode\u003ertcwake\u003c/code\u003e requires root permission, it needs the root password when that cron job is run. But given it\u0026rsquo;s a bad idea to store root passwords anywhere it\u0026rsquo;s better to use root\u0026rsquo;s crontab instead of the one owned by the user. In other words, it would be two separate crontabs:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ewith \u003ccode\u003esudo crontab -e\u003c/code\u003e:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e1  4 * * *  sudo rtcwake -m no -t $(date +\\%s -d \u0026#34;tomorrow 03:55\u0026#34;)\n\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ewith your regular \u003ccode\u003ecrontab -e\u003c/code\u003e (of course, this can also be run under root\u0026rsquo;s crontab, but I don\u0026rsquo;t want to clutter that up):\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e59 3 * * * /some/bash/script.sh\n\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eEt voilà, it\u0026rsquo;s as sweet as a dream, pun intended.\u003c/p\u003e\n\u003cp\u003eThe only issue is if your machine restarts during the day and failed to run the crontab containing \u003ccode\u003ertcwake\u003c/code\u003e, you\u0026rsquo;ll have to do it manually once to get the cycle started.\u003c/p\u003e\n"
        },
        {
            "title": "Another Random Portrait",
            "date_published": "2020-08-08T21:56:55+02:00",
            "date_modified": "2020-08-08T21:56:55+02:00",
            "id": "https://yunli.nl/sketchbook/2020-08-08_portrait/",
            "url": "https://yunli.nl/sketchbook/2020-08-08_portrait/",
            "content_html": "\u003cp\u003e\u003cimg src=\"/sketchbook/2020-08-08_portrait.jpg\" alt=\"Another Random Portrait\" title=\"Another Random Portrait\"\u003e\u003c/p\u003e\n\u003cp\u003eAnother Random Portrait, watercolour\u003c/p\u003e"
        },
        {
            "title": "Mauve",
            "date_published": "2020-08-07T21:54:05+02:00",
            "date_modified": "2020-08-07T21:54:05+02:00",
            "id": "https://yunli.nl/sketchbook/2020-08-07_mauve/",
            "url": "https://yunli.nl/sketchbook/2020-08-07_mauve/",
            "content_html": "\u003cp\u003e\u003cimg src=\"/sketchbook/2020-08-07_mauve.jpg\" alt=\"Mauve\" title=\"Mauve\"\u003e\u003c/p\u003e\n\u003cp\u003eMauve, watercolour\u003c/p\u003e"
        },
        {
            "title": "Wine",
            "date_published": "2020-08-06T22:02:11+02:00",
            "date_modified": "2020-08-06T22:02:11+02:00",
            "id": "https://yunli.nl/sketchbook/2020-08-06_wine/",
            "url": "https://yunli.nl/sketchbook/2020-08-06_wine/",
            "content_html": "\u003cp\u003e\u003cimg src=\"/sketchbook/2020-08-06_wine.jpg\" alt=\"Wine\" title=\"Wine\"\u003e\u003c/p\u003e\n\u003cp\u003eWine, watercolour\u003c/p\u003e"
        },
        {
            "title": "Value Study",
            "date_published": "2020-07-24T22:00:05+02:00",
            "date_modified": "2020-07-24T22:00:05+02:00",
            "id": "https://yunli.nl/sketchbook/2020-07-24_value_study/",
            "url": "https://yunli.nl/sketchbook/2020-07-24_value_study/",
            "content_html": "\u003cp\u003e\u003cimg src=\"/sketchbook/2020-07-24_value_study.jpg\" alt=\"Value Study\" title=\"Value Study\"\u003e\u003c/p\u003e\n\u003cp\u003eValue study, watercolour\u003c/p\u003e"
        },
        {
            "title": "Write Tests for Your Data Science Project",
            "date_published": "2020-07-03T13:09:00+02:00",
            "date_modified": "2020-07-03T13:09:00+02:00",
            "id": "https://yunli.nl/blogs/2020-07-03-write_tests/",
            "url": "https://yunli.nl/blogs/2020-07-03-write_tests/",
            "content_html": "\u003cp\u003eI never seem to have got into the habit of writing tests as I code. That\u0026rsquo;s bad, I know.\u003c/p\u003e\n\u003cp\u003eBut there are so many excuses that prevents it, \u0026ldquo;oh this is just an exploratory thing\u0026rdquo;, or \u0026ldquo;Karen and Chad really needs the report/tool soon, no time for test\u0026rdquo;, or whatever else that might get in your way. Plus there\u0026rsquo;s a tendency to just use the million open-source projects out-of-the box, and expect them to do what you think they do.\u003c/p\u003e\n\u003cp\u003eSometimes they don\u0026rsquo;t work they way you had hoped, and you end up digging thought lines and lines of code hoping to find out what went wrong where. And if you\u0026rsquo;re working with particularly large datasets, just the IO along can slow you down very considerably. Or worse yet, you merrily hand over a \u0026ldquo;finished product\u0026rdquo; without even realising the bugs inside \u0026ndash; because no tests told you so! I can personally attest to this, especially those deadline-rushed projects.\u003c/p\u003e\n\u003cp\u003eWell, this time I did it again. I\u0026rsquo;m about a thousand line deep into my autotrader project, when I realised my features are being scaled in inconsistent ways, that I though of \u0026ldquo;hmm, maybe there should be a test for this\u0026hellip;\u0026rdquo;\u003c/p\u003e\n\u003cp\u003eIt\u0026rsquo;s a very simple operation, take all the values of one feature in the training dataset, subtract the mean, and divide by the standard deviation.\nThe default behaviour of \u003ca href=\"https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.StandardScaler.html\"\u003e\u003ccode\u003esklearn.preprocessing.StandardScaler\u003c/code\u003e\u003c/a\u003e takes the population standard deviation, meaning it\u0026rsquo;s normalised by \u003ccode\u003eN\u003c/code\u003e, the sample size, whereas the default behaviour of \u003ca href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.std.html\"\u003e\u003ccode\u003epandas.DataFrame.std\u003c/code\u003e\u003c/a\u003e calculates standard deviation with \u003ccode\u003eN-1\u003c/code\u003e, which is what I expected.\u003c/p\u003e\n\u003cp\u003eI went back and created a toy dataset, and wrote my own test for my functions and modules which scale different types of features. And many more tests for other functions and modules. I spent a whole week catching up with writing tests. During the process I also refactored some of my maybe-a-bit-too-long functions, so that they\u0026rsquo;re easier to test, and also easier to read.\u003c/p\u003e\n\u003cp\u003eGranted, bugs are ever-elusive, and no amount of testing can ensure you don\u0026rsquo;t ever make mistakes. But I would sleep better at night. (It\u0026rsquo;s also a great feeling to watch your tests pass one by one, and the green dots appear one after another. So satisfying.)\u003c/p\u003e\n\u003cp\u003eJust write some tests, it\u0026rsquo;s better late than never.\u003c/p\u003e\n"
        },
        {
            "title": "Peaches",
            "date_published": "2020-07-02T21:45:03+02:00",
            "date_modified": "2020-07-02T21:45:03+02:00",
            "id": "https://yunli.nl/sketchbook/2020-07-02_assholes/",
            "url": "https://yunli.nl/sketchbook/2020-07-02_assholes/",
            "content_html": "\u003cp\u003e\u003cimg src=\"/sketchbook/2020-07-02_peaches.jpg\" alt=\"Peaches\" title=\"Peaches\"\u003e\u003c/p\u003e\n\u003cp\u003ePeaches, watercolour\u003c/p\u003e"
        }
        ]
}
