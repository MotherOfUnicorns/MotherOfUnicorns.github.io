
{
    "version": "https://jsonfeed.org/version/1.1",
    "title": "Quick Fixes on yun's attic",
    "description": "Recent content in Quick Fixes on yun's attic",
    "home_page_url": "https://yunli.nl/",
    "feed_url": "https://yunli.nl/quick-fixes/index.json",
    "language": "en-GB",
    "icon": "https://yunli.nl/images/logo.png",
    "favicon": "https://yunli.nl/images/logo.png",
    "authors": [
        {
            "name": "yun li",
            "url": "https://yunli.nl"
        }
    ],
    "items": [
        {
            "title": "Using Different SSH Profiles for Different Bitbucket Accounts",
            "date_published": "2025-07-18T11:54:19+03:00",
            "date_modified": "2025-07-18T11:54:19+03:00",
            "id": "https://yunli.nl/quick-fixes/2025-07-18-using_different_ssh_profiles_for_different_bitbucket_accounts/",
            "url": "https://yunli.nl/quick-fixes/2025-07-18-using_different_ssh_profiles_for_different_bitbucket_accounts/",
            "content_html": "\u003cp\u003eFor various reasons I have multiple Bitbucket accounts with different organisations, and Bitbucket does not let you use the same SSH key for different organisations - probably for a good reason.\nI\u0026rsquo;ve have had to set this up a couple times, and this time I finally decided to jot it down so hopefully I won\u0026rsquo;t have to rack my brain next time.\u003c/p\u003e\n\u003cp\u003eWhen handling timeseries data, quite often you may want to resample the data at a different frequency and use it that way.\u003c/p\u003e\n\u003cp\u003eOne way to achieve this is to load all data with Python, and \u003ca href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html\"\u003eresample\u003c/a\u003e or \u003ca href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.reindex.html\"\u003ereindex\u003c/a\u003e it with Pandas.\u003c/p\u003e\n\u003cp\u003eAn alternative is to query directly in SQL by using a pattern like the one below. This allows you to only get the most recent data at each sample point you\u0026rsquo;re interested in. This particular example samples the exchange rate between JPY and USD every two hours (in the actual database, I have some more recent data at 1 min intervals, and the rest at either 5 min or 30 min intervals):\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eselect\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003egenerate_series\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;2020-01-01\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;2020-01-15\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;2 hour\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#6639ba\"\u003einterval\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003elateral\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eselect\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ef\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003ewhere\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ef\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e\u0026lt;=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eand\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_from\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;JPY\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eand\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_to\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;USD\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eorder\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eby\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ef\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003edesc\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003elimit\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ep\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eon\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eSince I\u0026rsquo;m down on the SQLAlchemy ORM road, why not try to write the query there as well!\u003c/p\u003e\n\u003cp\u003eI found the SQLAlchemy documentation quite difficult to grapple with at times, and I get the impression that there are many, many different ways to accomplish the same thing.\nAt some point I got quite overwhelmed and frustrated after reading page after page of docs that doesn\u0026rsquo;t directly answer the question I have.\u003c/p\u003e\n\u003cp\u003eThen I came across this \u003ca href=\"https://adam-gligor.github.io/2019/11/15/sqlalchemy-subqueries/\"\u003eblog post\u003c/a\u003e by Adam Gligor, which really helped me comb my thoughts and finally decide on how I want to approach it.\u003c/p\u003e\n\u003cp\u003eFirst take care of all the imports:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003edatetime\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eas\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003edt\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e and_\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e desc\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.orm\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e aliased\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e sessionmaker\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.sql\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e func\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.sql.expression\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e join\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003e.constants\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e DB_ENGINE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003e.models\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e FxPrice\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e_Session \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e sessionmaker\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003ebind\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003eDB_ENGINE\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esession \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e _Session\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eI wrote this subquery to generate timeseries that I want to resample the data on, and aliased it:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003estart_ts\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e end_ts \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e dt\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e dt\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003einterval \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e dt\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003etimedelta\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003ehours\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esubquery_ts \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    session\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003equery\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        func\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003egenerate_series\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003estart_ts\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e end_ts\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e interval\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elabel\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;sampled_at\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003esubquery\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elateral\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ea \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e aliased\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003esubquery_ts\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThe \u003ccode\u003ealiased()\u003c/code\u003e function does something like this in SQL:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eselect\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esome_table\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eas\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esome_alias\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e...\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eIt essentially allows you to give a name to some (intermediate or temporary) table, so that you can reference it later, either when joining it with another table, or joining it with itself.\u003c/p\u003e\n\u003cp\u003eThen I wrote another subquery to get the most recent price update at each time point I want to sample.\nNote that here I compared the timestamp in \u003ccode\u003eFxPrice\u003c/code\u003e table with \u003ccode\u003ea.c.sampled_at\u003c/code\u003e, where \u003ccode\u003ea\u003c/code\u003e is the aforementioned alias to the table created using \u003ccode\u003egenerate_series\u003c/code\u003e.\n(The \u003ccode\u003e.c\u003c/code\u003e in \u003ccode\u003ea.c\u003c/code\u003e is for \u003ccode\u003ecolumns\u003c/code\u003e, so \u003ccode\u003ea.c.sampled_at\u003c/code\u003e gets you the column named \u003ccode\u003esampled_at\u003c/code\u003e.)\u003c/p\u003e\n\u003cp\u003eWithout the aliasing I wouldn\u0026rsquo;t be able to achieve this effect; instead it would create a nested subquery and that\u0026rsquo;s not what I want.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esubquery_price \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    session\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003equery\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eFxPrice\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003efilter\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        and_\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            FxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ets \u003cspan style=\"color:#0550ae\"\u003e\u0026lt;=\u003c/span\u003e a\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003esampled_at\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            FxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_from \u003cspan style=\"color:#0550ae\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;JPY\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            FxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_to \u003cspan style=\"color:#0550ae\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;USD\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eorder_by\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003edesc\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eFxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elimit\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003esubquery\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elateral\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eFinally, putting everything together:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eresults \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    session\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003equery\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        a\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eprice\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eselect_from\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003ea\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ejoin\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003esubquery_price\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e true\u003cspan style=\"color:#1f2328\"\u003e())\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eall\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eWhich actually produces the following query:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_2\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003esampled_at\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003eprice\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003egenerate_series\u003cspan style=\"color:#1f2328\"\u003e(:\u003c/span\u003egenerate_series_1\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003egenerate_series_2\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003egenerate_series_3\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_2\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eJOIN\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eLATERAL\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecreated_at\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecreated_at\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_from\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_to\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003eprice\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eprice\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e\u0026lt;=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_2\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAND\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003ecurrency_from_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAND\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003ecurrency_to_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eORDER\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eBY\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eDESC\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eLIMIT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003eparam_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eON\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ewhere the parameters are:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#1f2328\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;generate_series_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e datetime\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;generate_series_2\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e datetime\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;generate_series_3\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e datetime\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003etimedelta\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eseconds\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e7200\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;currency_from_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;JPY\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;currency_to_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;USD\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;param_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#1f2328\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"
        },
        {
            "title": "Waking Up with rtcwake and crontab",
            "date_published": "2020-08-17T21:19:46+02:00",
            "date_modified": "2020-08-17T21:19:46+02:00",
            "id": "https://yunli.nl/quick-fixes/2020-08-17_waking_up_with_rtcwake_and_crontab/",
            "url": "https://yunli.nl/quick-fixes/2020-08-17_waking_up_with_rtcwake_and_crontab/",
            "content_html": "\u003cp\u003eI have a couple of scripts that I\u0026rsquo;d like to run at night, but I also want to leave my machine suspended to RAM overnight to conserve energy (and reduce noise, the fan is a beast!). So this is just a note for myself about how I went about it this time, using \u003ccode\u003ertcwake\u003c/code\u003e and \u003ccode\u003ecrontab\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eHere\u0026rsquo;s the crontab I originally had, which is triggered once a day in the afternoon:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e59 15 * * *  /some/bash/script.sh\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBut now I want to run it at night, when I\u0026rsquo;m not around my computer, which like me is probably also asleep. So I need to make sure the machine is in an awake state just before the cron jobs are scheduled to be executed.\u003c/p\u003e\n\u003cp\u003eSome minutes of DuckDuckGo later I found \u003ca href=\"https://www.man7.org/linux/man-pages/man8/rtcwake.8.html\"\u003e\u003ccode\u003ertcwake\u003c/code\u003e\u003c/a\u003e, which uses the hardware clock on the motherboard to send a signal to wake up the machine at desired time. Sounds like exactly what I need.\u003c/p\u003e\n\u003cp\u003eSo now my crontab becomes:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e1  4 * * *  sudo rtcwake -m no -t $(date +\\%s -d \u0026#34;tomorrow 03:55\u0026#34;)\n59 3 * * * /some/bash/script.sh\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSome explanations:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ertcwake\u003c/code\u003e needs root permission, hence the \u003ccode\u003esudo\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eThe \u003ccode\u003e-m no\u003c/code\u003e flag only sets an alert to wake up the machine. If the machine is already awake, nothing will change.\u003c/li\u003e\n\u003cli\u003eThe main idea is to start a cycle: \u003ccode\u003ertcwake\u003c/code\u003e wakes up the machine (03:55) a few minutes before the scheduled cron job (03:59), and then another cron job (04:01) uses \u003ccode\u003ertcwake\u003c/code\u003e to set up the next alert for tomorrow.\u003c/li\u003e\n\u003cli\u003eAfter everything is done, the machine will go to sleep after 30 minutes according to some other energy saving settings I have.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI waited for one night, but it did not work as I expected (it\u0026rsquo;s the first-time-never-works-law).\u003c/p\u003e\n\u003cp\u003eBecause \u003ccode\u003ertcwake\u003c/code\u003e requires root permission, it needs the root password when that cron job is run. But given it\u0026rsquo;s a bad idea to store root passwords anywhere it\u0026rsquo;s better to use root\u0026rsquo;s crontab instead of the one owned by the user. In other words, it would be two separate crontabs:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ewith \u003ccode\u003esudo crontab -e\u003c/code\u003e:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e1  4 * * *  sudo rtcwake -m no -t $(date +\\%s -d \u0026#34;tomorrow 03:55\u0026#34;)\n\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ewith your regular \u003ccode\u003ecrontab -e\u003c/code\u003e (of course, this can also be run under root\u0026rsquo;s crontab, but I don\u0026rsquo;t want to clutter that up):\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e59 3 * * * /some/bash/script.sh\n\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eEt voilà, it\u0026rsquo;s as sweet as a dream, pun intended.\u003c/p\u003e\n\u003cp\u003eThe only issue is if your machine restarts during the day and failed to run the crontab containing \u003ccode\u003ertcwake\u003c/code\u003e, you\u0026rsquo;ll have to do it manually once to get the cycle started.\u003c/p\u003e\n"
        },
        {
            "title": "Time Zone in Python - Tip of the Iceberg",
            "date_published": "2020-06-09T14:02:50+02:00",
            "date_modified": "2020-06-09T14:02:50+02:00",
            "id": "https://yunli.nl/quick-fixes/2020-06-09-timezone_in_python/",
            "url": "https://yunli.nl/quick-fixes/2020-06-09-timezone_in_python/",
            "content_html": "\u003cp\u003eTime zone is such a messy subject, and I don\u0026rsquo;t even know what to start with.\u003c/p\u003e\n\u003cp\u003eAt my previous job I had this photo saved from a \u003ca href=\"https://stackoverflow.com/questions/13703720/converting-between-datetime-timestamp-and-datetime64\"\u003estackoverflow answer\u003c/a\u003e:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://i.stack.imgur.com/uiXQd.png\" alt=\"time zone conversion\"\u003e\u003c/p\u003e\n\u003cp\u003eso that every time I need to do some time zone conversion magic, I have a quick reference to go to. Because seriously, how do you expect anyone to memorize all that?\u003c/p\u003e\n\u003cp\u003eToday I\u0026rsquo;m playing with some time zone stuff again for the API with my autotrader database, and encountered a new problem/feature that somehow entirely evaded my attention in the past. In a nutshell, these two code blocks produced different results, and I couldn\u0026rsquo;t understand why:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003euse \u003ccode\u003etzinfo=...\u003c/code\u003e when creating a \u003ccode\u003edatetime.datetime\u003c/code\u003e object\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003edatetime\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eas\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003edt\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003epytz\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e timezone\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etz \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e timezone\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;Europe/Amsterdam\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edt\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e10\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e tzinfo\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003etz\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ewhich produces this result:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edatetime\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e10\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e tzinfo\u003cspan style=\"color:#0550ae\"\u003e=\u0026lt;\u003c/span\u003eDstTzInfo \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;Europe/Amsterdam\u0026#39;\u003c/span\u003e LMT\u003cspan style=\"color:#0550ae\"\u003e+\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e20\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e00\u003c/span\u003e STD\u003cspan style=\"color:#0550ae\"\u003e\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003euse \u003ccode\u003etimezone.localize()\u003c/code\u003e on an existing \u003ccode\u003edatetime.datetime\u003c/code\u003e object\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etz \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e timezone\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;Europe/Amsterdam\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etz\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elocalize\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003edt\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e10\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ewhich gives this:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edatetime\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e10\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e tzinfo\u003cspan style=\"color:#0550ae\"\u003e=\u0026lt;\u003c/span\u003eDstTzInfo \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;Europe/Amsterdam\u0026#39;\u003c/span\u003e CET\u003cspan style=\"color:#0550ae\"\u003e+\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e00\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e00\u003c/span\u003e STD\u003cspan style=\"color:#0550ae\"\u003e\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eWhy are they not the same???\u003c/p\u003e\n\u003cp\u003eAnswer is, method #1 returns a time offset which is the \u003ca href=\"https://en.wikipedia.org/wiki/Local_mean_time\"\u003eLocal Mean Time (LMT)\u003c/a\u003e, which is purely decided by the longitude of the location in question. On the other hand, method #2 gives the actual \u003ca href=\"https://en.wikipedia.org/wiki/Time_zone\"\u003etime zone\u003c/a\u003e, which is more of a social structure than a geological one, and that is what I wanted.\u003c/p\u003e\n\u003cp\u003eHere \u003ccode\u003eCET\u003c/code\u003e stands for Central European Time, which is the time zone observed in the Netherlands.\u003c/p\u003e\n\u003cp\u003eI didn\u0026rsquo;t feel like using any third-party packages like \u003ca href=\"https://arrow.readthedocs.io/en/latest/\"\u003eArrow\u003c/a\u003e or \u003ca href=\"https://pendulum.eustace.io/\"\u003ePendulum\u003c/a\u003e. They each have their own nice features, but integrating them with other libraries (like SQLAlchemy I\u0026rsquo;m using) sometimes is a bit messy (and more work to do).\u003c/p\u003e\n\u003cp\u003eMaybe at some point I\u0026rsquo;ll end up writing a series about how I approach time zones. Part of me still hopes that we\u0026rsquo;ll all switch to UTC some time soon. Or at least, get rid of daylight saving.\u003c/p\u003e\n"
        },
        {
            "title": "Lateral Join with SQLAlchemy",
            "date_published": "2020-06-02T11:54:19+02:00",
            "date_modified": "2020-06-02T11:54:19+02:00",
            "id": "https://yunli.nl/quick-fixes/2020-05-02-lateral_join_orm/",
            "url": "https://yunli.nl/quick-fixes/2020-05-02-lateral_join_orm/",
            "content_html": "\u003cp\u003eWhen handling timeseries data, quite often you may want to resample the data at a different frequency and use it that way.\u003c/p\u003e\n\u003cp\u003eOne way to achieve this is to load all data with Python, and \u003ca href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html\"\u003eresample\u003c/a\u003e or \u003ca href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.reindex.html\"\u003ereindex\u003c/a\u003e it with Pandas.\u003c/p\u003e\n\u003cp\u003eAn alternative is to query directly in SQL by using a pattern like the one below. This allows you to only get the most recent data at each sample point you\u0026rsquo;re interested in. This particular example samples the exchange rate between JPY and USD every two hours (in the actual database, I have some more recent data at 1 min intervals, and the rest at either 5 min or 30 min intervals):\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eselect\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003egenerate_series\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;2020-01-01\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;2020-01-15\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;2 hour\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#6639ba\"\u003einterval\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003elateral\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eselect\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ef\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003ewhere\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ef\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e\u0026lt;=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eand\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_from\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;JPY\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eand\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_to\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#39;USD\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eorder\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eby\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ef\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003edesc\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003elimit\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ep\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eon\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eSince I\u0026rsquo;m down on the SQLAlchemy ORM road, why not try to write the query there as well!\u003c/p\u003e\n\u003cp\u003eI found the SQLAlchemy documentation quite difficult to grapple with at times, and I get the impression that there are many, many different ways to accomplish the same thing.\nAt some point I got quite overwhelmed and frustrated after reading page after page of docs that doesn\u0026rsquo;t directly answer the question I have.\u003c/p\u003e\n\u003cp\u003eThen I came across this \u003ca href=\"https://adam-gligor.github.io/2019/11/15/sqlalchemy-subqueries/\"\u003eblog post\u003c/a\u003e by Adam Gligor, which really helped me comb my thoughts and finally decide on how I want to approach it.\u003c/p\u003e\n\u003cp\u003eFirst take care of all the imports:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003edatetime\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eas\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003edt\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e and_\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e desc\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.orm\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e aliased\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e sessionmaker\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.sql\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e func\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.sql.expression\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e join\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003e.constants\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e DB_ENGINE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003e.models\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e FxPrice\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e_Session \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e sessionmaker\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003ebind\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003eDB_ENGINE\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esession \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e _Session\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eI wrote this subquery to generate timeseries that I want to resample the data on, and aliased it:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003estart_ts\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e end_ts \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e dt\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e dt\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003einterval \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e dt\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003etimedelta\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003ehours\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esubquery_ts \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    session\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003equery\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        func\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003egenerate_series\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003estart_ts\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e end_ts\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e interval\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elabel\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;sampled_at\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003esubquery\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elateral\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ea \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e aliased\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003esubquery_ts\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThe \u003ccode\u003ealiased()\u003c/code\u003e function does something like this in SQL:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eselect\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esome_table\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eas\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esome_alias\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e...\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eIt essentially allows you to give a name to some (intermediate or temporary) table, so that you can reference it later, either when joining it with another table, or joining it with itself.\u003c/p\u003e\n\u003cp\u003eThen I wrote another subquery to get the most recent price update at each time point I want to sample.\nNote that here I compared the timestamp in \u003ccode\u003eFxPrice\u003c/code\u003e table with \u003ccode\u003ea.c.sampled_at\u003c/code\u003e, where \u003ccode\u003ea\u003c/code\u003e is the aforementioned alias to the table created using \u003ccode\u003egenerate_series\u003c/code\u003e.\n(The \u003ccode\u003e.c\u003c/code\u003e in \u003ccode\u003ea.c\u003c/code\u003e is for \u003ccode\u003ecolumns\u003c/code\u003e, so \u003ccode\u003ea.c.sampled_at\u003c/code\u003e gets you the column named \u003ccode\u003esampled_at\u003c/code\u003e.)\u003c/p\u003e\n\u003cp\u003eWithout the aliasing I wouldn\u0026rsquo;t be able to achieve this effect; instead it would create a nested subquery and that\u0026rsquo;s not what I want.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esubquery_price \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    session\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003equery\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eFxPrice\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003efilter\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        and_\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            FxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ets \u003cspan style=\"color:#0550ae\"\u003e\u0026lt;=\u003c/span\u003e a\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003esampled_at\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            FxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_from \u003cspan style=\"color:#0550ae\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;JPY\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            FxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_to \u003cspan style=\"color:#0550ae\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;USD\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eorder_by\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003edesc\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eFxPrice\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elimit\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003esubquery\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003elateral\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eFinally, putting everything together:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eresults \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    session\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003equery\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        a\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        subquery_price\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ec\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eprice\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eselect_from\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003ea\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003ejoin\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003esubquery_price\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e true\u003cspan style=\"color:#1f2328\"\u003e())\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003eall\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eWhich actually produces the following query:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_2\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003esampled_at\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003eprice\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003egenerate_series\u003cspan style=\"color:#1f2328\"\u003e(:\u003c/span\u003egenerate_series_1\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003egenerate_series_2\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003egenerate_series_3\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_2\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eJOIN\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eLATERAL\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eSELECT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecreated_at\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecreated_at\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ets\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_from\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ecurrency_to\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003eprice\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eprice\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eWHERE\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e\u0026lt;=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_2\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003esampled_at\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAND\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_from\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003ecurrency_from_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAND\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ecurrency_to\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003ecurrency_to_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eORDER\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eBY\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003ealphavantage\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003efx\u003cspan style=\"color:#1f2328\"\u003e.\u003c/span\u003ets\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eDESC\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eLIMIT\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003eparam_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e    \u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eAS\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003eanon_1\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#fff\"\u003e\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eON\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e \u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#fff\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ewhere the parameters are:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#1f2328\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;generate_series_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e datetime\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;generate_series_2\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e datetime\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003edatetime\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e2020\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;generate_series_3\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e datetime\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003etimedelta\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eseconds\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#0550ae\"\u003e7200\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;currency_from_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;JPY\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;currency_to_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;USD\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0a3069\"\u003e\u0026#39;param_1\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#0550ae\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#1f2328\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"
        },
        {
            "title": "Schema Names: SQLAlchemy and Alembic",
            "date_published": "2020-05-28T11:54:19+02:00",
            "date_modified": "2020-05-28T11:54:19+02:00",
            "id": "https://yunli.nl/quick-fixes/2020-05-28-schema_name/",
            "url": "https://yunli.nl/quick-fixes/2020-05-28-schema_name/",
            "content_html": "\u003cp\u003eI recently started working on my own autotrader. There\u0026rsquo;s still much to be done, but I\u0026rsquo;ve finished the first step \u0026ndash; collecting data and put them in a database. I\u0026rsquo;ve got a PostgreSQL server running on Docker, and a script that reads data using the \u003ca href=\"https://www.alphavantage.co/documentation/\"\u003eAlphaVantage API\u003c/a\u003e and writes to my database.\u003c/p\u003e\n\u003cp\u003eThe next step would be to write my own Python API to query data from the database. The easy way for me would be to stick a bunch of SQL queries in some python functions, but why do that when you can make life more complicated! I\u0026rsquo;ve been wanting to learn about \u003ca href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\"\u003eORM\u003c/a\u003e, and decided this would be my chance to try it out with SQLAlchemy.\u003c/p\u003e\n\u003ch2 id=\"foreign-keys\"\u003eforeign keys\u003c/h2\u003e\n\u003cp\u003eI first created these models:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e Column\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e ForeignKey\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.dialects.postgresql\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e DOUBLE_PRECISION\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e TEXT\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e TIMESTAMP\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.ext.declarative\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e declarative_base\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#24292e\"\u003esqlalchemy.orm\u003c/span\u003e \u003cspan style=\"color:#cf222e\"\u003eimport\u003c/span\u003e relationship\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBase \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e declarative_base\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003eModelMixin\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    __table_args__ \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#34;schema\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;alphavantage\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    created_at \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e Column\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eTIMESTAMP\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003etimezone\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eTrue\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003eCurrency\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eBase\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e ModelMixin\u003cspan style=\"color:#1f2328\"\u003e):\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    __tablename__ \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;currencies\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    currency \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e Column\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eTEXT\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e primary_key\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eTrue\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#1f2328\"\u003eFxPrice\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eBase\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e ModelMixin\u003cspan style=\"color:#1f2328\"\u003e):\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    __tablename__ \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#0a3069\"\u003e\u0026#34;fx\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ts \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e Column\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eTIMESTAMP\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003etimezone\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eTrue\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e primary_key\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eTrue\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    currency_from \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e Column\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        TEXT\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e ForeignKey\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#34;currencies.currency\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e primary_key\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eTrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    currency_to \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e Column\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        TEXT\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e ForeignKey\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#34;currencies.currency\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e primary_key\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eTrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    price \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e Column\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003eDOUBLE_PRECISION\u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    _currency_from \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e relationship\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#34;Currency\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e foreign_keys\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e[\u003c/span\u003ecurrency_from\u003cspan style=\"color:#1f2328\"\u003e])\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    _currency_to \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e relationship\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#34;Currency\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e foreign_keys\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e[\u003c/span\u003ecurrency_to\u003cspan style=\"color:#1f2328\"\u003e])\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eWith an existing database, my goal is to reproduce the tables with a SQLAlchemy model, so I can interact with the database through this bit of Python code.\u003c/p\u003e\n\u003cp\u003eBut it didn\u0026rsquo;t work, and kept producing this error:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003esqlalchemy.exc.NoReferencedTableError: Foreign key associated with column \u0026#39;fx.currency_from\u0026#39; could not find table \u0026#39;currencies\u0026#39; with which to generate a foreign key to target column \u0026#39;currency\u0026#39;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAfter much digging, I found this is because the tables are not in the default \u003ccode\u003epublic\u003c/code\u003e schema, and the solution is to specify schema name while declaring the columns with foreign keys:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    currency_from \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e Column\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        TEXT\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e ForeignKey\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#34;alphavantage.currencies.currency\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e primary_key\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eTrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    currency_to \u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e Column\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        TEXT\u003cspan style=\"color:#1f2328\"\u003e,\u003c/span\u003e ForeignKey\u003cspan style=\"color:#1f2328\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#0a3069\"\u003e\u0026#34;alphavantage.currencies.currency\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e),\u003c/span\u003e primary_key\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eTrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#1f2328\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"alembic\"\u003ealembic\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://alembic.sqlalchemy.org/en/latest/\"\u003eAlembic\u003c/a\u003e is a tool for helping with database migrations. It helps tie together your SQLAlchemy models with tables in your database, so that any change you make in your ORM model (e.g. add a column, introduce a new table, etc) will be automatically reflected in your databse.\u003c/p\u003e\n\u003cp\u003eIt was quite easy to set up, but when I ran\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ealembic revision --autogenerate\nalembic upgrade head --sql\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eto try it out, it ended up trying to create two new tables in my database \u003ccode\u003epublic.\u0026quot;alphavantage.currencies\u0026quot;\u003c/code\u003e and \u003ccode\u003epublic.\u0026quot;alphavantage.fx\u0026quot;\u003c/code\u003e. The expected behaviour is to do nothing, because those two tables already exist in my database.\u003c/p\u003e\n\u003cp\u003eApparenly, by default, alembic only discovers tables in the default schema. In this case the tables are in a different \u003ccode\u003ealphavantage\u003c/code\u003e schema, and that caused some confusion.\u003c/p\u003e\n\u003cp\u003eTo change its default behaviour, locate the \u003ccode\u003eenv.py\u003c/code\u003e file in \u003ccode\u003e./alembic\u003c/code\u003e, and add this line\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003einclude_schemas\u003cspan style=\"color:#0550ae\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#cf222e\"\u003eTrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ein the bit about\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003econtext\u003cspan style=\"color:#0550ae\"\u003e.\u003c/span\u003econfigure\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eof both of these two functions\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#6639ba\"\u003erun_migrations_offline\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e():\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#cf222e\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#6639ba\"\u003erun_migrations_online\u003c/span\u003e\u003cspan style=\"color:#1f2328\"\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#0550ae\"\u003e...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"conclusion\"\u003econclusion\u003c/h2\u003e\n\u003cp\u003eMaybe check your schema names when SQLAlchemy can\u0026rsquo;t seem find a table that actually exists!\u003c/p\u003e\n"
        }
        ]
}
